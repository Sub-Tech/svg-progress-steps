!function(){"use strict";var t="http://www.w3.org/2000/svg",e="http://www.w3.org/1999/xlink",s={target:null,steps:[],currentStep:0,svgNode:null,setAttrs:function(t,e){for(var s=0;s<e.length;s++)t.setAttribute(e[s][0],e[s][1])},renderSvg:function(){this.svgNode=document.createElementNS(t,"svg");var s=this.isStandardType()?"".concat(2*this.cR*this.steps.length*2," ").concat(2*this.cR+this.strokeWidth):"".concat(2*this.cR*this.steps.length," ").concat(2*this.cR+this.strokeWidth);this.setAttrs(this.svgNode,[["viewBox","0 0 ".concat(s)],["version",e],["xmlns:xlink",e],["height","".concat(this.cR)],["width","100%"]]),this.target.appendChild(this.svgNode)},renderSvgCircles:function(){var e=this;this.steps.map((function(s,r){var i=e.isStandardType()?2*e.cD*(r+.5):1*e.cD*(r+.5),n=document.createElementNS(t,"circle");e.setAttrs(n,[["cx",i],["cy","50%"],["r","".concat(e.cR)],["stroke-width","".concat(e.strokeWidth)],["fill",e.backgroundColor],["class","step-foreground-fill"]]),e.svgNode.appendChild(n)}))},getMedian:function(t){var e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2},renderTextNodes:function(){var e=this,s=this.cR+this.strokeWidth/2+this.fontSize/3;this.steps.map((function(r,i){var n=e.isStandardType()?2*e.cD*(i+.5):1*e.cD*(i+.5);if(r){var o=document.createElementNS(t,"text");if(e.setAttrs(o,[["x",n],["y",s],["text-anchor","middle"],["class","step-text"],["fill",e.textFill],["font-size","".concat(e.fontSize)]]),r.constructor===Array){var c=r.map((function(t,e){return e+1})),a=e.getMedian(c);r.map((function(r,i){var c=s+(i+1-a)*e.fontSize,l=document.createElementNS(t,"tspan");e.setAttrs(l,[["x","".concat(n)],["y","".concat(c)]]);var h=document.createTextNode(r);l.appendChild(h),o.appendChild(l)}))}else{var l=document.createTextNode(r);o.appendChild(l)}e.svgNode.appendChild(o)}}))},isStandardType:function(){return"standard"===this.styleType},pathAnimate:function(){for(var t=this,e=this.target.querySelectorAll(".path-progress"),s=function(s){var r=e[s].getTotalLength();e[s].style.transition="stroke-dasharray ".concat(t.animationSpeed,"ms ease-in-out");var i=Math.PI*t.cR,n=(t.isStandardType()?i*t.currentStep+t.cD*t.currentStep-t.strokeWidth/2:i*t.currentStep)+(t.currentStepCompleted?i*t.currentStepCompleted:0);setTimeout((function(){e[s].style.strokeDasharray=(n<0?0:n)+", "+r}),0)},r=0;r<e.length;r++)s(r)},setTransActive:function(t,e,s,r){t.style.transition="fill ".concat(e,"ms ease"),t.style.transitionDelay="".concat(s,"ms"),t.style.fill=r},animate:function(t){var e=this;this.pathAnimate();var s=this.animationSpeed/(this.currentStep+1);this.steps.map((function(t,r){var i=e.target.querySelectorAll(".step-foreground-fill")[r];e.completeFill&&(i.style.transitionDelay="0ms",r<e.currentStep?e.setTransActive(i,s,s*r,e.completeFill):i.style.fill=e.backgroundColor),e.activeFill&&(r===e.currentStep?e.setTransActive(i,s,s*r,e.activeFill):r<e.currentStep&&e.currentStep?i.style.fill=e.completeFill:i.style.fill=e.backgroundColor);var n=e.target.querySelectorAll(".step-text")[r];n.style.fill=e.textFill,e.completeTextFill&&r<e.currentStep&&e.setTransActive(n,s,s*r,e.completeTextFill),e.activeTextFill&&r===e.currentStep&&e.setTransActive(n,s,s*r,e.activeTextFill)})),t&&"function"===t.constructor&&t(this.target.querySelectorAll(".step-text")[this.currentStep])},createPath:function(){return document.createElementNS(t,"path")},renderPath:function(){var t=this,e={standard:[1,0,1,0],snake:[1,1]},s=this.isStandardType()?1:0;e[this.styleType].map((function(e){return t.createPath()})).map((function(r,i){var n=t.isStandardType()?"M ".concat(t.cR," ").concat(t.cR+t.strokeWidth/2," "):"M ".concat(0," ",t.cR+t.strokeWidth/2," ");if("standard"===t.styleType)for(var o=1;o<=t.steps.length;o++)n+="a1 1 0 ".concat(e[t.styleType][i]," ").concat(e[t.styleType][i]," ").concat(t.cD," 0 "),o!==t.steps.length&&(n+="h".concat(t.cD," "));if("snake"===t.styleType)for(var c=1;c<=t.steps.length;c++)n+="a1 1 0 ".concat(c%2," ").concat(c%2," ").concat(t.cD," 0 ");i>s?t.setAttrs(r,[["stroke",t.colorFg],["fill","none"],["stroke-width",t.strokeWidth],["class","path-progress"],["stroke-dasharray","0 10000"],["stroke-dashoffset","0"],["d",n]]):t.setAttrs(r,[["stroke",t.colorBg],["fill","none"],["stroke-width",t.strokeWidth],["d",n]]),t.svgNode.appendChild(r)}))},setNumber:function(t,e){return isNaN(t)?e:t},setString:function(t,e){return t||e},setEnumString:function(t,e,s){return-1!=s.indexOf(t)?t:e},setConfig:function(t){this.target=t.target,this.cR=this.setNumber(t.circleRadius,60),this.currentStep=this.setNumber(t.currentStep,0),this.currentStepCompleted=this.setNumber(t.currentStepCompleted,0),this.animationSpeed=this.setNumber(t.animationSpeed,500),this.steps=t.steps||[],this.backgroundColor=this.setString(t.backgroundColor,"#ffffff"),this.colorBg=this.setString(t.colorBg,"#cccccc"),this.colorFg=this.setString(t.colorFg,"limeGreen"),this.strokeWidth=this.setNumber(t.strokeWidth,12),this.textFill=this.setString(t.textFill,"black"),this.fontSize=this.setNumber(t.fontSize,40),this.completeFill=this.setString(t.completeFill,""),this.activeFill=this.setString(t.activeFill,""),this.completeTextFill=this.setString(t.completeTextFill,""),this.activeTextFill=this.setString(t.activeTextFill,""),this.styleType=this.setEnumString(t.styleType,"standard",["snake"]),this.cD=2*this.cR},updateProgress:function(t,e){this.currentStep=this.setNumber(t.currentStep,this.currentStep),this.currentStepCompleted=this.setNumber(t.currentStepCompleted,this.currentStepCompleted),this.animationSpeed=this.setNumber(t.animationSpeed,this.animationSpeed),this.animate(e)},updateStepsText:function(t){if(t.length!==this.steps.length)return console.error("".concat("svg-progress-steps",": could not update steps text as unequal step length")),this;this.steps=t||this.steps;for(var e=this.svgNode.querySelectorAll(".step-text"),s=0;s<e.length;s++)e[s].remove();return this.renderTextNodes(),this},init:function(t){t.target&&t.steps&&t.steps.length&&("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),this.setConfig(t),this.renderSvg(),this.renderSvgCircles(),this.renderPath(),this.renderTextNodes(),this.animate())}};window.stepsProgress=function(t){var e=Object.create(s);return e.init(t),e}}();